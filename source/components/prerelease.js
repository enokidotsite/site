var Nanocomponent = require('nanocomponent')
var html = require('choo/html')
var Warp = require('warpjs')
var css = require('sheetify')

var styles = css`
  :host {
    height: 100vh;
    width: 100%;
    padding: 4rem;
  }

  :host svg {
    height: 100%;
    width: 100%;
  }
`

module.exports = class Prerelease extends Nanocomponent {
  constructor () {
    super()

    this.state = {
      offset: 0
    }

    this.observer
    this.warp
  }

  load (element) {
    var self = this
    var svg = element.querySelector('svg')
    this.warp = new Warp(svg)

    this.warp.interpolate(10)
    this.warp.transform(([ x, y ]) => [ x, y, y ])

    // window.addEventListener(function (e) {
    //   var e = s.getBoundingClientRect();
    //   this.warp.transform(a(p - e.left, y - e.top, f - e.left, d - e.top, c, .33))
    // })

    function animate() {
      self.warp.transform(([ x, y, oy ]) => [ x, oy + 4 * Math.sin(x / 16 + self.state.offset), oy ])
      self.state.offset += 0.1
      requestAnimationFrame(animate)
    }

    animate()

    // if (typeof IntersectionObserver !== 'undefined') {
    //   this.observer = new IntersectionObserver(this.handleIntersection)
    //   this.observer.observe(element)
    // }
  }

  unload () {
    // if (typeof IntersectionObserver === 'undefined') return
    // this.observer.disconnect()
  }

  createElement (props) {
    return html`
      <div class="${styles}">
        <svg width="194px" height="43px" viewBox="0 0 194 43">
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="t" transform="translate(-27.000000, -66.000000)" fill="#ffffff">
                  <path d="M33.388174,86.8361938 C33.388174,88.2690624 33.3981243,89.8511644 33.4180253,91.5825474 C33.4379263,93.3139303 33.6070818,94.9358336 33.9254971,96.4483061 C34.2439123,97.9607785 34.7712797,99.2244701 35.5076149,100.239419 C36.2439502,101.254367 37.3484365,101.761834 38.8211071,101.761834 C40.2937776,101.761834 41.4181646,101.254367 42.1943018,100.239419 C42.9704389,99.2244701 43.5276573,97.9707288 43.8659735,96.4781574 C44.2042897,94.9855859 44.3933459,93.3636825 44.4331478,91.6123986 C44.4729497,89.8611148 44.4928504,88.2690624 44.4928504,86.8361938 C44.4928504,85.4033251 44.453049,83.910776 44.3734452,82.3585017 C44.2938414,80.8062274 44.0649839,79.3733802 43.6868658,78.0599173 C43.3087477,76.7464544 42.741579,75.6618687 41.9853428,74.8061277 C41.2291066,73.9503868 40.1743719,73.5225227 38.8211071,73.5225227 C37.4280403,73.5225227 36.3633553,73.9503868 35.6270201,74.8061277 C34.8906848,75.6618687 34.3533671,76.7464544 34.0150509,78.0599173 C33.6767347,79.3733802 33.4876785,80.8161777 33.4478766,82.388353 C33.4080747,83.9605283 33.388174,85.443127 33.388174,86.8361938 Z M27,86.8361938 C27,84.4480794 27.1791059,82.0500505 27.537323,79.6420352 C27.8955402,77.2340198 28.5224108,75.0747988 29.4179537,73.1643073 C30.3134966,71.2538158 31.5174862,69.7015647 33.0299587,68.5075076 C34.5424311,67.3134504 36.4727946,66.7164307 38.8211071,66.7164307 C41.2490234,66.7164307 43.2490391,67.3134504 44.8212144,68.5075076 C46.3933897,69.7015647 47.6371807,71.2538158 48.5526245,73.1643073 C49.4680683,75.0747988 50.1048893,77.2240695 50.4631064,79.6121839 C50.8213236,82.0002983 51.0004295,84.4082775 51.0004295,86.8361938 C51.0004295,101.36389 46.940696,108.627629 38.8211071,108.627629 C34.8011145,108.627629 31.8259667,106.826619 29.8955742,103.224547 C27.9651817,99.6224742 27,94.1597445 27,86.8361938 Z M60.7916495,97.1050342 C61.1100647,98.7767143 61.6573327,99.9807039 62.4334699,100.717039 C63.2096071,101.453374 64.2941928,101.821537 65.6872595,101.821537 C67.5579491,101.821537 68.861442,101.294169 69.5977772,100.239419 C70.3341125,99.1846682 70.7022746,97.841374 70.7022746,96.2094958 C70.7022746,94.1795986 70.3241622,92.6472482 69.5679259,91.6123986 C68.8116897,90.5775491 67.3788426,90.0601321 65.2693416,90.0601321 L63.4782647,90.0601321 L63.4782647,84.089876 L65.2693416,84.089876 C66.2643892,84.089876 67.0604154,83.9903727 67.657444,83.7913632 C68.2544726,83.5923536 68.7022373,83.2639928 69.0007516,82.8062709 C69.2992659,82.348549 69.4982725,81.77143 69.5977772,81.0748966 C69.697282,80.3783633 69.7470336,79.5524861 69.7470336,78.5972404 C69.7470336,78.0002118 69.6773813,77.4031921 69.5380747,76.8061635 C69.398768,76.2091349 69.1699105,75.6618669 68.8514952,75.1643431 C68.53308,74.6668193 68.1350669,74.2688062 67.657444,73.9702919 C67.1798211,73.6717776 66.6027021,73.5225227 65.9260697,73.5225227 C65.1300316,73.5225227 64.4633597,73.6518769 63.9260339,73.9105893 C63.3887082,74.1693017 62.9707945,74.5076128 62.6722802,74.9255329 C62.3737659,75.3434529 62.164809,75.8409692 62.0454033,76.4180969 C61.9259976,76.9952245 61.8662956,77.6021945 61.8662956,78.239025 L55.5378241,78.239025 C55.5378241,74.6966553 56.4333536,71.9006134 58.2244394,69.8508152 C60.0155252,67.801017 62.503107,66.7761333 65.6872595,66.7761333 C69.0306196,66.7761333 71.6077544,67.8109673 73.4187411,69.8806665 C75.2297279,71.9503656 76.1352077,74.8558612 76.1352077,78.5972404 C76.1352077,80.3883261 75.7968965,82.0002792 75.1202641,83.4331478 C74.4436317,84.8660164 73.7073075,86.0003537 72.9112694,86.8361938 C74.0655246,87.7914395 75.0406567,89.0551311 75.8366948,90.6273064 C76.632733,92.1994817 77.0307461,94.0601929 77.0307461,96.2094958 C77.0307461,98.0801854 76.7720376,99.7717411 76.2546128,101.284214 C75.737188,102.796686 74.9809631,104.090229 73.9859155,105.16488 C72.9908678,106.239531 71.7968285,107.075359 70.4037618,107.672388 C69.0106951,108.269416 67.4385434,108.567926 65.6872595,108.567926 C62.4633051,108.567926 59.8264683,107.602744 57.7766702,105.672352 C55.726872,103.741959 54.6422863,100.866315 54.5228806,97.0453317 L60.7916495,97.1050342 Z M95.9564579,93.881096 L81.5681407,93.881096 L81.5681407,87.6720296 L95.9564579,87.6720296 L95.9564579,93.881096 Z M114.643359,67.2537538 L114.643359,108.030603 L108.195483,108.030603 L108.195483,78.1196199 L102.225227,78.1196199 L102.225227,72.8060919 C103.140671,72.8060919 104.006349,72.716539 104.822288,72.5374304 C105.638227,72.3583218 106.344701,72.0797127 106.941729,71.7015946 C107.538758,71.3234765 108.016373,70.8259601 108.374591,70.2090305 C108.732808,69.592101 108.911914,68.8657271 108.911914,68.0298871 L108.911914,67.2537538 L114.643359,67.2537538 Z M125.688333,95.7318753 C125.688333,93.8611858 126.046545,92.0402759 126.762979,90.269091 C127.479414,88.4979062 128.414744,87.09491 129.569,86.0600605 C128.573952,85.0252109 127.827677,83.811271 127.330154,82.4182043 C126.83263,81.0251375 126.583872,79.4927871 126.583872,77.8211071 C126.583872,75.9106156 126.892332,74.2190599 127.509261,72.7463894 C128.126191,71.2737189 128.932167,70.0398783 129.927215,69.0448306 C130.922263,68.049783 132.06655,67.2935581 133.360112,66.7761333 C134.653674,66.2587085 135.996968,66 137.390035,66 C138.822904,66 140.186099,66.2786092 141.479661,66.8358359 C142.773223,67.3930625 143.89761,68.1890887 144.852855,69.2239383 C145.808101,70.2587879 146.564326,71.5025788 147.121553,72.9553483 C147.678779,74.4081179 147.957388,76.0300213 147.957388,77.8211071 C147.957388,79.6121928 147.69868,81.1843446 147.181255,82.5376094 C146.66383,83.8908742 145.927506,85.0650128 144.97226,86.0600605 C146.325525,87.1347119 147.320558,88.5377081 147.957388,90.269091 C148.594219,92.0004739 148.912629,93.8213838 148.912629,95.7318753 C148.912629,97.9607821 148.604169,99.8811953 147.98724,101.493172 C147.37031,103.10515 146.544433,104.428543 145.509583,105.463393 C144.474734,106.498242 143.250844,107.274368 141.837876,107.791793 C140.424908,108.309217 138.94231,108.567926 137.390035,108.567926 C135.718355,108.567926 134.166104,108.299267 132.733235,107.761941 C131.300367,107.224616 130.056576,106.418639 129.001825,105.343988 C127.947075,104.269336 127.131148,102.935992 126.55402,101.343916 C125.976893,99.7518398 125.688333,97.8811783 125.688333,95.7318753 Z M132.255615,95.6124702 C132.255615,97.8811789 132.773032,99.4831816 133.807882,100.418526 C134.842731,101.353871 136.03677,101.821537 137.390035,101.821537 C138.783102,101.821537 139.957241,101.343921 140.912486,100.388675 C141.867732,99.4334293 142.345348,97.841377 142.345348,95.6124702 C142.345348,93.7417806 141.887633,92.2591819 140.972189,91.1646294 C140.056745,90.070077 138.862706,89.522809 137.390035,89.522809 C135.837761,89.522809 134.59397,90.070077 133.658625,91.1646294 C132.72328,92.2591819 132.255615,93.7417806 132.255615,95.6124702 Z M141.569214,77.8211071 C141.569214,76.1892289 141.161251,74.9056367 140.345312,73.9702919 C139.529373,73.0349471 138.54429,72.5672817 137.390035,72.5672817 C136.116374,72.5672817 135.08154,73.0349471 134.285502,73.9702919 C133.489464,74.9056367 133.091451,76.1892289 133.091451,77.8211071 C133.091451,79.6917967 133.479514,81.0350908 134.255651,81.8510299 C135.031788,82.666969 136.076572,83.0749324 137.390035,83.0749324 C138.663696,83.0749324 139.67863,82.666969 140.434866,81.8510299 C141.191102,81.0350908 141.569214,79.6917967 141.569214,77.8211071 Z M167.539828,93.881096 L153.151511,93.881096 L153.151511,87.6720296 L167.539828,87.6720296 L167.539828,93.881096 Z M186.22673,67.2537538 L186.22673,108.030603 L179.778853,108.030603 L179.778853,78.1196199 L173.808597,78.1196199 L173.808597,72.8060919 C174.724041,72.8060919 175.58972,72.716539 176.405659,72.5374304 C177.221598,72.3583218 177.928071,72.0797127 178.5251,71.7015946 C179.122128,71.3234765 179.599744,70.8259601 179.957961,70.2090305 C180.316178,69.592101 180.495284,68.8657271 180.495284,68.0298871 L180.495284,67.2537538 L186.22673,67.2537538 Z M197.271704,95.7318753 C197.271704,93.8611858 197.629916,92.0402759 198.34635,90.269091 C199.062784,88.4979062 199.998115,87.09491 201.15237,86.0600605 C200.157323,85.0252109 199.411048,83.811271 198.913524,82.4182043 C198.416,81.0251375 198.167242,79.4927871 198.167242,77.8211071 C198.167242,75.9106156 198.475702,74.2190599 199.092632,72.7463894 C199.709561,71.2737189 200.515538,70.0398783 201.510586,69.0448306 C202.505633,68.049783 203.649921,67.2935581 204.943483,66.7761333 C206.237045,66.2587085 207.580339,66 208.973406,66 C210.406274,66 211.769469,66.2786092 213.063031,66.8358359 C214.356593,67.3930625 215.48098,68.1890887 216.436226,69.2239383 C217.391472,70.2587879 218.147696,71.5025788 218.704923,72.9553483 C219.26215,74.4081179 219.540759,76.0300213 219.540759,77.8211071 C219.540759,79.6121928 219.282051,81.1843446 218.764626,82.5376094 C218.247201,83.8908742 217.510877,85.0650128 216.555631,86.0600605 C217.908896,87.1347119 218.903929,88.5377081 219.540759,90.269091 C220.17759,92.0004739 220.496,93.8213838 220.496,95.7318753 C220.496,97.9607821 220.18754,99.8811953 219.57061,101.493172 C218.953681,103.10515 218.127804,104.428543 217.092954,105.463393 C216.058104,106.498242 214.834214,107.274368 213.421247,107.791793 C212.008279,108.309217 210.52568,108.567926 208.973406,108.567926 C207.301726,108.567926 205.749475,108.299267 204.316606,107.761941 C202.883737,107.224616 201.639946,106.418639 200.585196,105.343988 C199.530445,104.269336 198.714519,102.935992 198.137391,101.343916 C197.560263,99.7518398 197.271704,97.8811783 197.271704,95.7318753 Z M203.838985,95.6124702 C203.838985,97.8811789 204.356403,99.4831816 205.391252,100.418526 C206.426102,101.353871 207.620141,101.821537 208.973406,101.821537 C210.366472,101.821537 211.540611,101.343921 212.495857,100.388675 C213.451103,99.4334293 213.928718,97.841377 213.928718,95.6124702 C213.928718,93.7417806 213.471003,92.2591819 212.555559,91.1646294 C211.640116,90.070077 210.446076,89.522809 208.973406,89.522809 C207.421131,89.522809 206.17734,90.070077 205.241996,91.1646294 C204.306651,92.2591819 203.838985,93.7417806 203.838985,95.6124702 Z M213.152585,77.8211071 C213.152585,76.1892289 212.744622,74.9056367 211.928683,73.9702919 C211.112743,73.0349471 210.127661,72.5672817 208.973406,72.5672817 C207.699745,72.5672817 206.664911,73.0349471 205.868873,73.9702919 C205.072834,74.9056367 204.674821,76.1892289 204.674821,77.8211071 C204.674821,79.6917967 205.062884,81.0350908 205.839021,81.8510299 C206.615158,82.666969 207.659943,83.0749324 208.973406,83.0749324 C210.247067,83.0749324 211.262,82.666969 212.018236,81.8510299 C212.774473,81.0350908 213.152585,79.6917967 213.152585,77.8211071 Z" id="03-18-18"/>
                </g>
            </g>
        </svg>
      </div>
    `
  }

  update (props) {
    return false
  }

  handleIntersection (event) {
    if (event[0].isIntersecting) {
      window.addEventListener('mousemove', this.handleMove, false)
    } else {
      window.cancelAnimationFrame(this.frame)
      window.removeEventListener('mousemove', this.handleMove, false)
    }
  }
}


/*
    var v = new l.default(s);
    v.interpolate(10);
    var m = !0;
    window.addEventListener("mousemove", function() {
        return m && null !== p && null !== y && requestAnimationFrame(function() {
            var e = s.getBoundingClientRect();
            v.transform(a(p - e.left, y - e.top, f - e.left, d - e.top, c, .33))
        })
    }), window.addEventListener("touchstart", function() {
        return m = !1
    }), window.addEventListener("touchend", function() {
        return m = !0
    }), window.addEventListener("touchcancel", function() {
        return m = !0
    }), window.addEventListener("touchmove", function() {
        return requestAnimationFrame(function() {
            var e = s.getBoundingClientRect();
            Object.values(h).forEach(function(t) {
                var r = t.lastX,
                    n = t.lastY,
                    o = t.x,
                    i = t.y;
                v.transform(a(r - e.left, n - e.top, o - e.left, i - e.top, c, .33))
            })
        })
    })

*/